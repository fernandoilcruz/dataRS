color = "lightgray",
size = .15) +
labs(title = "Var. % do Rendimento Médio da Produção de Soja",
caption = 'Fonte: DataRS', size = 8) +
# scale_fill_distiller(palette = "RdYlGn",
#                      name = "Var. % do Rendimento",
#                      breaks = c(-50, -25, -10, 10, 25, 50),
#                      direction = "horizontal") +
scale_fill_stepsn(
name = "Var. % do Rendimento",
breaks = c(-50, -25, 0, 25, 50),
colours = c("#D7191C", "#FDAE61", "#FFFFBF", "#A6D96A", "#1A9641"),
#limits = c(-50, 50)
) +
gganimate::transition_manual(year) +
labs( title = "Ano: {current_frame}") +
# transition_states(Ano,transition_length = 10, state_length = 1) +
# labs(title = "Ano: {closest_state}") +
# transition_time(as.integer(Ano)) +
# labs(title = "Ano: {as.integer(frame_time)}") +
theme_minimal()
map_rs |>
ggplot() +
geom_sf(
aes(
fill = cut(
`percent change`,
breaks = c(-Inf, -25, 0, 25, Inf),
labels = c("< -25%", "-25% to 0%", "0% to 25%", "> 25%"),
right = TRUE
)
),
color = "lightgray",
size = 0.15
) +
labs(
title = "Var. % do Rendimento Médio da Produção de Soja",
caption = "Fonte: DataRS",
fill = "Var. % do Rendimento"
) +
scale_fill_manual(
values = c(
"< -25%" = "#D7191C",
"-25% to 0%" = "#FDAE61",
"0% to 25%" = "#FFFFBF",
"> 25%" = "#A6D96A"
)
) +
gganimate::transition_manual(year) +
labs(title = "Ano: {current_frame}")
p_map1 <-
map_rs |>
ggplot() +
geom_sf(
aes(
fill = cut(
`percent change`,
breaks = c(-Inf, -25, 0, 25, Inf),
labels = c("< -25%", "-25% to 0%", "0% to 25%", "> 25%"),
right = TRUE
)
),
color = "lightgray",
size = 0.15
) +
labs(
title = "Var. % do Rendimento Médio da Produção de Soja",
caption = "Fonte: DataRS",
fill = "Var. % do Rendimento"
) +
scale_fill_manual(
values = c(
"< -25%" = "#D7191C",
"-25% to 0%" = "#FDAE61",
"0% to 25%" = "#FFFFBF",
"> 25%" = "#A6D96A"
)
) +
gganimate::transition_manual(year) +
labs(title = "Ano: {current_frame}")
p_anim1 <- animate(p_map1,
nframes = 500,
#duration = 20,
renderer = gifski_renderer())
rend_estado <-
data_soy_state |>
ggplot(
aes(x = year,
y = `percent change`
)
) +
geom_line(colour = "darkblue",
alpha = 0.5,
size = 1) +
geom_point(colour = "darkblue") +
ggtitle("Rendimento da produção de soja no Rio Grande do Sul") +
gganimate::transition_reveal(year) +
theme_minimal()
p_anim2 <- animate(rend_estado,
nframes = 31,
#nframes = 500,
#duration = 20,
renderer = gifski_renderer())
a_mgif <- image_read(p_anim1)
b_mgif <- image_read(p_anim2)
new_gif <- image_append(c(a_mgif[1], b_mgif[1]), stack = FALSE)
for(i in 2:31){
combined <- image_append(c(a_mgif[i], b_mgif[i]), stack = FALSE)
new_gif <- c(new_gif, combined)
}
new_gif
p_map1 <-
map_rs |>
ggplot() +
geom_sf(
aes(
fill = cut(
`percent change`,
breaks = c(-Inf, -25, 0, 25, Inf),
labels = c("< -25%", "-25% to 0%", "0% to 25%", "> 25%"),
right = TRUE
)
),
color = "lightgray",
size = 0.15
) +
labs(
title = "Var. % do Rendimento Médio da Produção de Soja",
caption = "Fonte: DataRS",
fill = "Var. % do Rendimento"
) +
scale_fill_manual(
values = c(
"< -25%" = "#A6D96A",
"-25% to 0%" =  "#FFFFBF",
"0% to 25%" = "#FDAE61",
"> 25%" = "#D7191C"
)
) +
gganimate::transition_manual(year) +
labs(title = "Ano: {current_frame}")
p_anim1 <- animate(p_map1,
nframes = 500,
#duration = 20,
renderer = gifski_renderer())
rend_estado <-
data_soy_state |>
ggplot(
aes(x = year,
y = `percent change`
)
) +
geom_line(colour = "darkblue",
alpha = 0.5,
size = 1) +
geom_point(colour = "darkblue") +
ggtitle("Rendimento da produção de soja no Rio Grande do Sul") +
gganimate::transition_reveal(year) +
theme_minimal()
p_anim2 <- animate(rend_estado,
nframes = 31,
#nframes = 500,
#duration = 20,
renderer = gifski_renderer())
a_mgif <- image_read(p_anim1)
b_mgif <- image_read(p_anim2)
new_gif <- image_append(c(a_mgif[1], b_mgif[1]), stack = FALSE)
for(i in 2:31){
combined <- image_append(c(a_mgif[i], b_mgif[i]), stack = FALSE)
new_gif <- c(new_gif, combined)
}
new_gif
p_map1 <-
map_rs |>
ggplot() +
geom_sf(
aes(
fill = cut(
`percent change`,
breaks = c(-Inf, -25, 0, 25, Inf),
labels = c("< -25%", "-25% to 0%", "0% to 25%", "> 25%"),
right = TRUE
)
),
color = "lightgray",
size = 0.15
) +
labs(
title = "Var. % do Rendimento Médio da Produção de Soja",
caption = "Fonte: DataRS",
fill = "Var. % do Rendimento"
) +
scale_fill_manual(
values = c(
"< -25%" = "#A6D96A",
"-25% to 0%" =  "#FFFFBF",
"0% to 25%" = "#FDAE61",
"> 25%" = "#D7191C"
),
na.value = "gray95"
) +
gganimate::transition_manual(year) +
labs(title = "Ano: {current_frame}")
p_anim1 <- animate(p_map1,
nframes = 500,
#duration = 20,
renderer = gifski_renderer())
rend_estado <-
data_soy_state |>
ggplot(
aes(x = year,
y = `percent change`
)
) +
geom_line(colour = "darkblue",
alpha = 0.5,
size = 1) +
geom_point(colour = "darkblue") +
ggtitle("Rendimento da produção de soja no Rio Grande do Sul") +
gganimate::transition_reveal(year) +
theme_minimal()
p_anim2 <- animate(rend_estado,
nframes = 31,
#nframes = 500,
#duration = 20,
renderer = gifski_renderer())
a_mgif <- image_read(p_anim1)
b_mgif <- image_read(p_anim2)
new_gif <- image_append(c(a_mgif[1], b_mgif[1]), stack = FALSE)
for(i in 2:31){
combined <- image_append(c(a_mgif[i], b_mgif[i]), stack = FALSE)
new_gif <- c(new_gif, combined)
}
new_gif
p_map1 <-
map_rs |>
ggplot() +
geom_sf(
aes(
fill = cut(
`percent change`,
breaks = c(-Inf, -25, 0, 25, Inf),
labels = c("< -25%", "-25% a 0%", "0% a 25%", "> 25%"),
right = TRUE
)
),
color = "lightgray",
size = 0.15
) +
labs(
title = "Var. % do Rendimento Médio da Produção de Soja",
caption = "Fonte: DataRS",
fill = "Var. % do Rendimento"
) +
scale_fill_manual(
values = c(
"> 25%" = "#A6D96A",
"0% a 25%" =  "#FFFFBF",
"-25% a 0%" = "#FDAE61",
"< -25%" = "#D7191C"
),
na.value = "gray95"
) +
gganimate::transition_manual(year) +
labs(title = "Ano: {current_frame}") +
theme_minimal()
p_anim1 <- animate(p_map1,
nframes = 500,
#duration = 20,
renderer = gifski_renderer())
rend_estado <-
data_soy_state |>
ggplot(
aes(x = year,
y = `percent change`
)
) +
geom_line(colour = "darkblue",
alpha = 0.5,
size = 1) +
geom_point(colour = "darkblue") +
ggtitle("Rendimento da produção de soja no Rio Grande do Sul") +
gganimate::transition_reveal(year) +
theme_minimal()
p_anim2 <- animate(rend_estado,
nframes = 31,
#nframes = 500,
#duration = 20,
renderer = gifski_renderer())
a_mgif <- image_read(p_anim1)
b_mgif <- image_read(p_anim2)
new_gif <- image_append(c(a_mgif[1], b_mgif[1]), stack = FALSE)
for(i in 2:31){
combined <- image_append(c(a_mgif[i], b_mgif[i]), stack = FALSE)
new_gif <- c(new_gif, combined)
}
new_gif
install.packages("forcats")
p_map1 <-
map_rs |>
ggplot() +
geom_sf(
aes(
fill =
cut(
`percent change`,
breaks = c(-Inf, -25, 0, 25, Inf),
labels = c("< -25%", "-25% a 0%", "0% a 25%", "> 25%"),
right = TRUE
) |>
forcats::fct_rev()
),
color = "lightgray",
size = 0.15
) +
labs(
title = "Var. % do Rendimento Médio da Produção de Soja",
caption = "Fonte: DataRS",
fill = "Var. % do Rendimento"
) +
scale_fill_manual(
values = c(
"> 25%" = "#A6D96A",
"0% a 25%" =  "#FFFFBF",
"-25% a 0%" = "#FDAE61",
"< -25%" = "#D7191C"
),
na.value = "gray95"
) +
gganimate::transition_manual(year) +
labs(title = "Ano: {current_frame}") +
theme_minimal()
p_anim1 <- animate(p_map1,
nframes = 500,
#duration = 20,
renderer = gifski_renderer())
rend_estado <-
data_soy_state |>
ggplot(
aes(x = year,
y = `percent change`
)
) +
geom_line(colour = "darkblue",
alpha = 0.5,
size = 1) +
geom_point(colour = "darkblue") +
ggtitle("Rendimento da produção de soja no Rio Grande do Sul") +
gganimate::transition_reveal(year) +
theme_minimal()
p_anim2 <- animate(rend_estado,
nframes = 31,
#nframes = 500,
#duration = 20,
renderer = gifski_renderer())
a_mgif <- image_read(p_anim1)
b_mgif <- image_read(p_anim2)
new_gif <- image_append(c(a_mgif[1], b_mgif[1]), stack = FALSE)
for(i in 2:31){
combined <- image_append(c(a_mgif[i], b_mgif[i]), stack = FALSE)
new_gif <- c(new_gif, combined)
}
new_gif
data_soy_state
rend_estado <-
data_soy_state |>
ggplot(
aes(x = year,
y = `percent change`
)
) +
geom_line(colour = "darkblue",
alpha = 0.5,
size = 1) +
geom_point(colour = "darkblue") +
ggtitle("Rendimento da produção de soja no Rio Grande do Sul") +
gganimate::transition_reveal(year) +
theme_minimal()
rend_estado
data_soy_state |>
ggplot(
aes(x = year,
y = `percent change`
)
) +
geom_line(colour = "darkblue",
alpha = 0.5,
size = 1) +
geom_point(colour = "darkblue") +
ggtitle("Rendimento da produção de soja no Rio Grande do Sul") +
gganimate::transition_reveal(year) +
theme_minimal()
p_anim2 <- animate(rend_estado,
#nframes = 31,
nframes = 500,
#duration = 20,
renderer = gifski_renderer())
p_anim2
new_gif <- image_append(c(a_mgif[1], b_mgif[1]), stack = FALSE)
for(i in 2:500){
combined <- image_append(c(a_mgif[i], b_mgif[i]), stack = FALSE)
new_gif <- c(new_gif, combined)
}
a_mgif
b_mgif
p_map1 <-
map_rs |>
ggplot() +
geom_sf(
aes(
fill =
cut(
`percent change`,
breaks = c(-Inf, -25, 0, 25, Inf),
labels = c("< -25%", "-25% a 0%", "0% a 25%", "> 25%"),
right = TRUE
) |>
forcats::fct_rev()
),
color = "lightgray",
size = 0.15
) +
labs(
title = "Var. % do Rendimento Médio da Produção de Soja",
caption = "Fonte: DataRS",
fill = "Var. % do Rendimento"
) +
scale_fill_manual(
values = c(
"> 25%" = "#A6D96A",
"0% a 25%" =  "#FFFFBF",
"-25% a 0%" = "#FDAE61",
"< -25%" = "#D7191C"
),
na.value = "gray95"
) +
gganimate::transition_manual(year) +
labs(title = "Ano: {current_frame}") +
theme_minimal()
p_anim1 <- animate(p_map1,
nframes = 500,
#duration = 20,
renderer = gifski_renderer())
rend_estado <-
data_soy_state |>
ggplot(
aes(x = year,
y = `percent change`
)
) +
geom_line(colour = "darkblue",
alpha = 0.5,
size = 1) +
geom_point(colour = "darkblue") +
ggtitle("Rendimento da produção de soja no Rio Grande do Sul") +
gganimate::transition_reveal(year) +
theme_minimal()
p_anim2 <- animate(rend_estado,
#nframes = 31,
nframes = 500,
#duration = 20,
renderer = gifski_renderer())
a_mgif <- image_read(p_anim1)
b_mgif <- image_read(p_anim2)
new_gif <- image_append(c(a_mgif[1], b_mgif[1]), stack = FALSE)
for(i in 2:500){
combined <- image_append(c(a_mgif[i], b_mgif[i]), stack = FALSE)
new_gif <- c(new_gif, combined)
}
rm(list=ls())
library(dataRS)
library(devtools)
load_all()
geoagregall2()
help(geoagregall2)
help(geoagregall2, period = 2022)
help(geoagregall2, period = 2010)
geoagregall2(period = 2010)
geoagregall2(period = 2022)
geoagregall2(period = 2022) |> View()
library(tidyverse)
df0 <-
readxl::read_excel("C:\\Users\\fernando-cruz\\Downloads\\S1.1.xlsx")
df0
readxl::read_excel("C:\\Users\\fernando-cruz\\Downloads\\S1.1.xlsx") |>
save("data/geo_complement.rda")
readxl::read_excel("C:\\Users\\fernando-cruz\\Downloads\\S1.1.xlsx") |>
save("data/geo_complement.rda", compress = "bzip2")
usethis::use_data_raw()
rm(list=ls())
## code to prepare `DATASET` dataset goes here
geo_complement <-
readxl::read_excel("C:\\Users\\fernando-cruz\\Downloads\\S1.1.xlsx")
usethis::use_data(DATASET, overwrite = TRUE)
## code to prepare `DATASET` dataset goes here
geo_complement <-
readxl::read_excel("C:\\Users\\fernando-cruz\\Downloads\\S1.1.xlsx")
usethis::use_data(geo_complement, overwrite = TRUE)
usethis::use_r("geo_complement")
geo_complement
devtools::document()
?geo_complement
document()
?geo_complement
## code to prepare `DATASET` dataset goes here
geo_complement <-
readxl::read_excel(".data-raw\\S1.1.xlsx")
## code to prepare `DATASET` dataset goes here
geo_complement <-
readxl::read_excel(".\\data-raw\\S1.1.xlsx")
usethis::use_data(geo_complement, overwrite = TRUE)
document()
